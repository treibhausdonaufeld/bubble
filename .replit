modules = ["python-3.12", "web", "bash", "nodejs-20"]
run = "pip install -r requirements/base.txt && pip install -r requirements/local.txt && python manage.py migrate && python manage.py runserver 0.0.0.0:8000 & sleep 5 && npm run dev"

[nix]
channel = "stable-24_05"

[deployment]
run = [
  "sh",
  "-c",
  "pip install -r requirements/base.txt && pip install -r requirements/local.txt && python manage.py migrate && python manage.py runserver 0.0.0.0:8000 & sleep 5 && npm run dev",
]

[[ports]]
localPort = 3000
externalPort = 80

[[ports]]
localPort = 8000
externalPort = 8000
