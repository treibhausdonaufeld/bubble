{% extends "base.html" %}
{% load i18n %}

{% block title %}Willkommen bei Willgeben{% endblock %}

{% block content %}
<div class="container">
  <!-- Hero Section -->
  <div class="row justify-content-center text-center mb-5">
    <div class="col-lg-8">
      <h1 class="display-4 mb-3">Willkommen bei Willgeben</h1>
      <p class="lead">Ihre Plattform für das Teilen von Gegenständen und Dienstleistungen in der Treibhaus Donaufeld Gemeinschaft</p>
    </div>
  </div>

  <!-- Quick Navigation Cards -->
  <div class="row mb-5">
    <!-- Items Section -->
    <div class="col-lg-6 mb-4">
      <div class="card h-100">
        <div class="card-header bg-primary text-white">
          <h4 class="mb-0">
            <i class="fas fa-box"></i>
            Artikel
          </h4>
        </div>
        <div class="card-body">
          <p class="card-text">Stöbern und teilen Sie physische Gegenstände in unserer Gemeinschaft</p>

          <!-- Item Type Navigation -->
          <div class="row g-2 mb-3">
            <div class="col-4">
              <a href="{% url 'items:sell' %}" class="btn btn-success btn-sm w-100">
                <i class="fas fa-tag"></i><br>
                <small>Zu verkaufen</small>
              </a>
            </div>
            <div class="col-4">
              <a href="{% url 'items:give_away' %}" class="btn btn-info btn-sm w-100">
                <i class="fas fa-gift"></i><br>
                <small>Verschenken</small>
              </a>
            </div>
            <div class="col-4">
              <a href="{% url 'items:borrow' %}" class="btn btn-warning btn-sm w-100">
                <i class="fas fa-handshake"></i><br>
                <small>Ausleihen</small>
              </a>
            </div>
            <div class="col-4">
              <a href="{% url 'items:need' %}" class="btn btn-warning btn-sm w-100">
                <i class="fas fa-handshake"></i><br>
                <small>Benötigt</small>
              </a>
            </div>
          </div>

          <!-- Item Actions -->
          <div class="d-grid gap-2">
            <a href="{% url 'items:list' %}" class="btn btn-outline-primary">
              <i class="fas fa-list"></i> Alle Artikel durchsuchen
            </a>
            {% if user.is_authenticated %}
              <a href="{% url 'items:create' %}" class="btn btn-primary">
                <i class="fas fa-plus"></i> Neuen Artikel hinzufügen
              </a>
              <a href="{% url 'items:my_items' %}" class="btn btn-outline-secondary">
                <i class="fas fa-user-cog"></i> Meine Artikel
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- Services Section -->
    <div class="col-lg-6 mb-4">
      <div class="card h-100">
        <div class="card-header bg-secondary text-white">
          <h4 class="mb-0">
            <i class="fas fa-tools"></i>
            Dienstleistungen
          </h4>
        </div>
        <div class="card-body">
          <p class="card-text">Bieten und finden Sie Dienstleistungen in unserer Gemeinschaft</p>

          <!-- Services Coming Soon -->
          <div class="text-center py-3">
            <i class="fas fa-wrench fa-3x text-muted mb-2"></i>
            <p class="text-muted">Dienstleistungen kommen bald!</p>
            <small class="text-muted">Fähigkeiten teilen, Reparaturen, Nachhilfe und mehr</small>
          </div>

          <!-- Future Service Actions -->
          <div class="d-grid gap-2">
            <button class="btn btn-outline-secondary" disabled>
              <i class="fas fa-list"></i> Dienstleistungen durchsuchen
            </button>
            <button class="btn btn-outline-secondary" disabled>
              <i class="fas fa-plus"></i> Dienstleistung anbieten
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- User Section -->
  <div class="row justify-content-center mb-5">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-header bg-dark text-white">
          <h4 class="mb-0">
            <i class="fas fa-user"></i>
            Ihr Konto
          </h4>
        </div>
        <div class="card-body">
          {% if user.is_authenticated %}
            <!-- Authenticated User -->
            <div class="row align-items-center">
              <div class="col-md-8">
                <h5>Willkommen zurück, {{ user.username }}!</h5>
                <p class="text-muted mb-0">
                  {% if user.profile.intern %}
                    <span class="badge bg-warning">Interner Benutzer</span>
                  {% endif %}
                  Mitglied seit {{ user.date_joined|date:"F Y" }}
                </p>
              </div>
              <div class="col-md-4">
                <div class="d-grid gap-2">
                  <a href="{% url 'users:detail' user.username %}" class="btn btn-outline-primary btn-sm">
                    <i class="fas fa-user"></i> Profil anzeigen
                  </a>
                  <a href="{% url 'users:update' %}" class="btn btn-outline-secondary btn-sm">
                    <i class="fas fa-edit"></i> Profil bearbeiten
                  </a>
                  <a href="{% url 'account_logout' %}" class="btn btn-outline-danger btn-sm">
                    <i class="fas fa-sign-out-alt"></i> Abmelden
                  </a>
                </div>
              </div>
            </div>
          {% else %}
            <!-- Guest User -->
            <div class="row align-items-center">
              <div class="col-md-8">
                <h5>Treten Sie unserer Gemeinschaft bei!</h5>
                <p class="text-muted mb-0">Erstellen Sie ein Konto, um mit dem Teilen von Gegenständen und dem Kontakt zu Nachbarn zu beginnen</p>
              </div>
              <div class="col-md-4">
                <div class="d-grid gap-2">
                  <a href="{% url 'account_signup' %}" class="btn btn-primary btn-sm">
                    <i class="fas fa-user-plus"></i> Registrieren
                  </a>
                  <a href="{% url 'account_login' %}" class="btn btn-outline-primary btn-sm">
                    <i class="fas fa-sign-in-alt"></i> Anmelden
                  </a>
                </div>
              </div>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  {% if user.is_authenticated %}
    <div class="row text-center mb-5">
      <div class="col-md-4">
        <div class="card">
          <div class="card-body">
            <i class="fas fa-box fa-2x text-primary mb-2"></i>
            <h5>{{ user.items.filter.active.count }}</h5>
            <small class="text-muted">Ihre aktiven Artikel</small>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card">
          <div class="card-body">
            <i class="fas fa-eye fa-2x text-info mb-2"></i>
            <h5>Stöbern</h5>
            <small class="text-muted">Gemeinschaftsartikel entdecken</small>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card">
          <div class="card-body">
            <i class="fas fa-handshake fa-2x text-success mb-2"></i>
            <h5>Verbinden</h5>
            <small class="text-muted">Lernen Sie Ihre Nachbarn kennen</small>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  <!-- Community Info -->
  <div class="row justify-content-center">
    <div class="col-lg-8 text-center">
      <div class="card bg-light">
        <div class="card-body">
          <h5>Über Treibhaus Donaufeld</h5>
          <p class="mb-0">Willgeben ist Teil der Treibhaus Donaufeld Gemeinschaftsplattform und fördert nachhaltiges Teilen und nachbarschaftliche Verbindungen.</p>
          <a href="{% url 'core:about' %}" class="btn btn-link">Mehr erfahren</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}