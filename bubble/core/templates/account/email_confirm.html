{% extends "allauth/layouts/entrance.html" %}

{% load i18n %}
{% load account %}

{% block head_title %}
  E-Mail bestätigen
{% endblock head_title %}
{% block content %}
  <div class="card shadow">
    <div class="card-header bg-info text-white text-center">
      <h3 class="mb-0">
        <i class="fas fa-envelope-open me-2"></i>
        E-Mail bestätigen
      </h3>
    </div>
    <div class="card-body p-4 text-center">
      {% if confirmation %}
        {% user_display confirmation.email_address.user as user_display %}
        <div class="mb-4">
          <i class="fas fa-check-circle text-success fa-3x mb-3"></i>
          <h4>E-Mail-Adresse bestätigen</h4>
          <p class="text-muted">
            Bitte bestätigen Sie, dass
            <strong>{{ confirmation.email_address.email }}</strong>
            eine E-Mail-Adresse für Benutzer {{ user_display }} ist.
          </p>
        </div>
        <form method="post"
              action="{% url 'account_confirm_email' confirmation.key %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-success btn-lg">
            <i class="fas fa-check me-2"></i>
            E-Mail bestätigen
          </button>
        </form>
      {% else %}
        <div class="mb-4">
          <i class="fas fa-times-circle text-danger fa-3x mb-3"></i>
          <h4>Ungültiger Bestätigungslink</h4>
          <p class="text-muted">Dieser E-Mail-Bestätigungslink ist ungültig oder bereits verwendet worden.</p>
        </div>
        <a href="{% url 'account_email' %}" class="btn btn-primary">
          <i class="fas fa-envelope me-2"></i>
          E-Mail-Einstellungen verwalten
        </a>
      {% endif %}
      <hr class="my-4" />
      <div>
        <a href="{% url 'account_login' %}" class="btn btn-outline-primary me-2">
          <i class="fas fa-sign-in-alt me-2"></i>
          Anmelden
        </a>
        <a href="{% url 'home' %}" class="btn btn-outline-secondary">
          <i class="fas fa-home me-2"></i>
          Zur Startseite
        </a>
      </div>
    </div>
  </div>
{% endblock content %}
